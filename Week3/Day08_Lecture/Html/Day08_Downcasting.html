<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>OOP - Downcasting</title>
    <link rel="stylesheet" href="..\..\..\Xtra\Styles\coursestyles.css">  
    <link rel="stylesheet" href="..\..\..\Xtra\Styles\prism.css">
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script> -->
</head>
<body>
    <div class="sidenav">
        <a href="..\..\..\PG2_CourseMaterials.html">Home</a>

        <div class="header"><b>Lab</b></div>
        <a href="..\..\Lab3\Html\Lab3.html">Lab 3: Graphics Library</a>

        <div class="header"><a class="pageLink" href="..\..\Day07_Lecture\Html\Day07_OOP.html" class="indent"><b>OOP - Classes</b></a></div>
        <!-- <a href="..\..\Day07_Lecture\Slides\PG2_07_Classes.pdf" target="_blank" rel="noopener noreferrer">[Lecture Slides]</a>
        <a href="..\..\Day07_Lecture\Html\Day07_OOP.html" class="indent">Object-Oriented Programming</a>
        <a href="..\..\Day07_Lecture\Html\Day07_4Pillars.html" class="indent">The 4 Pillars</a>
        <a href="..\..\Day07_Lecture\Html\Day07_Classes.html" class="indent">Classes</a>
        <a href="..\..\Day07_Lecture\Html\Day07_Modifiers.html" class="indent">Access Modifiers</a>
        <a href="..\..\Day07_Lecture\Html\Day07_Fields.html" class="indent">Fields</a>
        <a href="..\..\Day07_Lecture\Html\Day07_Properties.html" class="indent">Properties</a>
        <a href="..\..\Day07_Lecture\Html\Day07_COnstructors.html" class="indent">Constructors</a>
        <a href="..\..\Day07_Lecture\Html\Day07_Methods.html" class="indent">Methods</a>
        <a href="..\..\Day07_Lecture\Html\Day07_Instances.html" class="indent">Instances</a>
        <a href="..\..\Day07_Lecture\Html\Day07_ClassChallenge.html" class="indent">Class Challenge</a> -->

        <div class="header"><b>Inheritance</b></div>
        <a href="..\Slides\PG2_08_Inheritance.pdf" target="_blank" rel="noopener noreferrer">[Lecture Slides]</a>
        <a href="Day08_TypesOfClasses.html" class="indent">Types of Classes</a>
        <a href="Day08_Inheritance.html" class="indent">Inheritance</a>
        <a href="Day08_Constructors.html" class="indent">Constructors</a>
        <a href="Day08_Upcasting.html" class="indent">Upcasting</a>
        <a href="Day08_Downcasting.html" class="indent active">Downcasting</a>


        <div class="header"><a class="pageLink" href="..\..\Day09_Lecture\Html\Day09_Polymorphism.html" class="indent"><b>Polymorphism</b></a></div>
        <!-- <a href="..\..\Day09_Lecture\Slides\PG2_09_Polymorphism.pdf" target="_blank" rel="noopener noreferrer">[Lecture Slides]</a>
        <a href="..\..\Day09_Lecture\Html\Day09_Polymorphism.html" class="indent">Polymorphism</a>
        <a href="..\..\Day09_Lecture\Html\Day09_Overwriting.html" class="indent">Overwriting</a>
        <a href="..\..\Day09_Lecture\Html\Day09_Overloading.html" class="indent">Overloading</a>
        <a href="..\..\Day09_Lecture\Html\Day09_ExtensionMethods.html" class="indent">Extension Methods</a>

        <div class="header"><b>Good Programming</b></div>
        <a href="..\..\Day09_Lecture\Slides\PG2_09_GoodSoftware.pdf" target="_blank" rel="noopener noreferrer">[Lecture Slides]</a>
        <a href="..\..\Day09_Lecture\Html\Day09_SOLID.html" class="indent">S.O.L.I.D.</a>
        <a href="..\..\Day09_Lecture\Html\Day09_Cohesion.html" class="indent">Cohesion</a>
        <a href="..\..\Day09_Lecture\Html\Day09_SingleResponsibility.html" class="indent">Single-Responsibility</a>
        <a href="..\..\Day09_Lecture\Html\Day09_Coupling.html" class="indent">Coupling</a>
        <a href="..\..\Day09_Lecture\Html\Day09_DependencyInversion.html" class="indent">Dependency Inversion</a>
        <a href="..\..\Day09_Lecture\Html\Day09_IsaHasa.html" class="indent">Is-A vs. Has-A</a> -->

        <p></p><br>
    </div> 
    <div class="main">
        <H1>OOP - Downcasting</H1>
        <p>
            <iframe width="640" height="360" src="https://web.microsoftstream.com/embed/video/65ec0ba7-227d-4253-bf9a-402785659498?autoplay=false&showinfo=true" allowfullscreen style="border:none;"></iframe>
        </p>
        <strong>Downcasting</strong> is when you take a variable of a base class type and you cast it to a variable of a derived class type.<br>
        <code class="language-csharp">DerivedClassType variableB = variableA; //if variableA is a base class of DerivedClassType</code>
        <p></p>
        <div class="block danger">
            <p>Downcasting is <strong><i>NOT SAFE</i></strong>! The compiler cannot determine if the variable can be cast to the derived type. 
                The variable might not actually point to an instance of the derived type.</p>
        </div>
        
        <h2>Examples</h2>
        <h3>How to Downcast <i>Safely</i></h3>
        <ul>
            <li><h3>Use the 'as' keyword</h3>
                If the 'as' keyword cannot cast to the derived type, then <code class="language-csharp">NULL</code> will be assigned to the derived type variable.
                
        <div class="block warning">
            <p>Because <code class="language-csharp">NULL</code> could be assigned to the derived type variable, you must check for NULL before using the derived type variable.</p>
        </div>
        <pre><code class="language-csharp">public class Person  {  }
public class Superhero : Person  {  }

Person bruce = new Person();
Superhero bats = bruce as Superhero; 
if(bats != null) //NULL might be assigned to bats if Bruce is just a Person
{
    //ok to use bats
}
</code></pre>
            </li>
            
            <li><h3>Use pattern matching</h3>
                Because you need to check for null when using the 'as' keyword, C# has combined the 2 lines into 1 line of code to be used in an if condition.
                The if condition uses the 'is' keyword which returns <strong>true</strong> if the variable is compatible with that type, <strong>false</strong> if not. If 'is' returns true,
                it will assign a value to the variable.
        <pre><code class="language-csharp">public class Person  {  }
public class Superhero : Person  {  }

Person bruce = new Person();
//the condition will be false if the bruce object is NOT compatible with the Superhero type
if(bruce is Superhero bats) 
{
    //ok to use bats. It will be non-NULL
}
</code></pre>
            </li>
            
            <li><h3>Explicitly Cast inside a try-catch</h3>
                Explicitly casting will throw an exception if it does not work so to do this safely you need to do it inside a try-catch block.
                
        <pre><code class="language-csharp">public class Person  {  }
public class Superhero : Person  {  }

Person bruce = new Person();
try 
{
    Superhero bats = (Superhero)bruce; //Explicitly cast to a Superhero variable
}
catch(Exception)
{    
}
</code></pre>
            </li>
        </ul>

        <p>
            <iframe width="640" height="360" src="https://web.microsoftstream.com/embed/video/f29e290d-417d-461e-9c11-10fdb2da8a5d?autoplay=false&showinfo=true" allowfullscreen style="border:none;"></iframe>
        </p>

        
        <h2>Challenges!</h2>
        <p>
            <iframe width="640" height="360" src="https://web.microsoftstream.com/embed/video/09146bd1-e0b0-4903-b54f-3d3662dda1b5?autoplay=false&showinfo=true" allowfullscreen style="border:none;"></iframe>
        </p>

    </div>
    <script src="..\..\..\Xtra\Styles\prism.js"></script>
    <script src="..\..\..\Xtra\Styles\collapsible.js"></script>
</body>
</html>